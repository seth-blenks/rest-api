<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Get a custom static website for your business." />
        <meta name="og:title" content="Get a custom static website for your business." />
        <meta name="og:image" content="{{url_for('window.static', filename='img/banner.jpg')}}" />
        <meta name="og:description" content="Get a custom static website for your business." />
        <meta name="author" content="" />
        <title>Static Sites</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="{{url_for('window.static', filename='favicon.ico')}}" />
        <!-- Bootstrap Icons-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{{url_for('window.static', filename='css/bootstrap.min.css')}}" rel="stylesheet" />

    </head>
    <body id="page-top">
        <!-- Navigation-->
        
       
       <div class='d-flex justify-content-center'>
        <div class='col-12 col-lg-6 col-md-8'>
            <nav class="navbar navbar-expand-lg py-3" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top">Worker API</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto my-2 my-lg-0">
                        <li class="nav-item"><a class="nav-link" href="#about">Usage</a></li>
                        {% if current_user.is_authenticated %}
                            <li class="nav-item"><a class="nav-link" href="{{url_for('window.dashboard')}}">Dashboard</a></li>
                            <li class='nav-item'><a class='nav-link' href='{{url_for("window.logout")}}'>Log Out </a></li>
                        {% endif %}
                        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <section class="page-section" id="about">
            <div class="container px-4 px-lg-5">
                <h2> About Worker API </h2>
                <p>
                    An API is a digital structure that allows applications to interact with information on data servers. This API is related business registry containing workers details.
                </p>
                
                <h2> Who Can Use the API</h2>
                <p>
                    The API is a test application. It is accessible to any one who have registered to the system.
                </p>

                <h2>How to Use the API</h2>
                <p>
                    After registration, your public and private keys will be made available on your dashboard. You can use the keys to make api queries.
                </p>

                <h2>Basic API Query</h2>
                <p>
                     To receive all the contents of the database you run the following get request with your public key as a parameter passed to the key variable.
                     <pre>
                     <code>
                        import requests
                        requests.get(‘https://www.vandies.com/api/v1/employee’,params={‘key’: public_key})
                     </code>
                    </pre>

                    <h3> Response </h3>
                    <code>[{‘username’: ‘name’,’email’:’email’}, ...]</code>
                </p>

                <p>
                    To update the users information you send a post request with your public and private key

                    <code>
                    requests.post(‘api.seth-seth.xyz/api/v1/employee’)
                    </code>
                </p> 
            </div>
        </section>
       
        <!-- Contact-->
        <section class="page-section" id="contact">
            <div class="px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="text-center">
                        <h2 class="mt-0">Login</h2>
                        <hr class="divider" />
                        <p class="text-muted mb-5">Provide your login details to view your api keys</p>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center mb-5">
                    <div>
                        <div id="contactForm">
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="loginEmail" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>

                            <!-- password address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="loginPassword" type="password" placeholder="name@example.com"/>
                                <label for="email">Password</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>
                            <!-- Submit Button-->
                            <div class="d-grid"><button class="btn btn-primary btn-xl" id="loginSubmitButton" type="submit">Submit</button></div>
                        </div>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-4 text-center mb-5 mb-lg-0">
                        <i class="bi-phone fs-2 mb-3 text-muted"></i>
                        <div>+x (xxx) xxx-xxx</div>
                    </div>
                </div>


                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="text-center">
                        <h2 class="mt-0">Register and Get your api Keys</h2>
                        <hr class="divider" />
                        <p class="text-muted mb-5">This application is a test project</p>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center mb-5">
                    <div class="">
                        <div id="contactForm">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="username" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                                <label for="name">Username</label>
                                <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>

                            <!-- password address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="password" type="password" placeholder="name@example.com"/>
                                <label for="email">Password</label>
                                <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                            </div>
                            <!-- Submit Button-->
                            <div class="d-grid"><button class="btn btn-primary btn-xl" id="submitButton" type="submit">Submit</button></div>
                        </div>
                    </div>
                </div>
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-lg-4 text-center mb-5 mb-lg-0">
                        <i class="bi-phone fs-2 mb-3 text-muted"></i>
                        <div>+x (xxx) xxx-xxx</div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="bg-light py-5">
            <div class="container px-4 px-lg-5"><div class="small text-center text-muted">Copyright &copy; 2021 - Company Name</div></div>
        </footer>
    </div>
</div>
        
        <!-- Bootstrap core JS-->
        <script src="{{url_for('window.static', filename='js/bootstrap.bundle.min.js')}}"></script>
        <!-- SimpleLightbox plugin JS-->
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script> -->
        <!-- Core theme JS-->
        <script src="{{url_for('window.static', filename ='js/scripts.js')}}"></script>
        <script>
            let submitButton = document.querySelector('#submitButton')
            submitButton.addEventListener('click', function(){
                let username = document.querySelector('#username').value
                let password = document.querySelector('#password').value
                let email = document.querySelector('#email').value

                console.log(username + ': ' + email + ': ' + password)
                if (username && password && email){
                    console.log('every required input provided !')
                    let formdata = new FormData()
                    formdata.append('username', username)
                    formdata.append('email', email)
                    formdata.append('password', password)

                    fetch('{{url_for("window.register")}}', {
                        'method': "POST",
                        'headers': {
                            'X-CSRFToken': '{{csrf_token()}}'
                        },
                        'body': formdata
                    }).then( response => response.json()).then( data => {
                        console.log(data);
                    })
                }
            })

            let loginSubmitButton = document.querySelector('#loginSubmitButton')
            loginSubmitButton.addEventListener('click', function(){
                let password = document.querySelector('#loginPassword').value
                let email = document.querySelector('#loginEmail').value

                console.log( email + ': ' + password)
                if (password && email){
                    console.log('every required input provided !')
                    let formdata = new FormData()
                    formdata.append('email', email)
                    formdata.append('password', password)

                    fetch('{{url_for("window.login")}}', {
                        'method': "POST",
                        'headers': {
                            'X-CSRFToken': '{{csrf_token()}}'
                        },
                        'body': formdata
                    }).then( response => response.json()).then( data => {
                        console.log(data);
                    })
                }
            })
        </script>
    </body>
</html>
